@using Microsoft.AspNetCore.Routing
@using Nop.Plugin.Baramjk.PhotoPlatform.Areas.Admin.Models.CashierEvents

@using Nop.Web.Framework.Models.DataTables
@{
}

<div class="card-body">
    <div class="cards-group">
        <div class="card card-default">
            <div class="card-header">
                <h5 class="float-left">
                    @T("Nop.Plugin.Baramjk.PhotoPlatform.Admin.CashierEvent.Balances")
                </h5>
                <div class="card-tools float-right">
                    <button type="submit" id="btnEditCashierDailyBalance"
                            onclick="OpenWindow('@(Url.Action("EditCashierDailyBalancePopup", "CashierEvent", new { Model.EventId, RefreshBtnId = "btnRefreshFundBalances" }))', 800, 800, true); return false;"
                            class="btn btn-primary">
                        <i class="fas fa-plus-square"></i>
                        @T("Admin.Common.AddNew")
                    </button>
                    <button type="submit" id="btnRefreshFundBalances" style="display: none"></button>
                    <script>
                        $(document).ready(function () {
                            $('#btnRefreshFundBalances').click(function () {
                                updateTable('#cashiers-daily-balances-grid');
                                return false;
                            });
                        });
                    </script>
                </div>
            </div>
            <div class="card-body">

                @await Html.PartialAsync("Table", new DataTablesModel
                {
                    Name = "cashiers-daily-balances-grid",
                    UrlRead = new DataUrl("ListDailyBalances", "CashierEvent", new RouteValueDictionary
                    {
                        [nameof(Model.EventId)] = Model.EventId
                    }),
                    UrlUpdate = new DataUrl("EditDailyFundBalance", "CashierEvent", null),
                    UrlDelete = new DataUrl("DeleteDailyFundBalance", "CashierEvent", null),
                    Length = Model.PageSize,
                    LengthMenu = Model.AvailablePageSizes,
                    ColumnCollection = new List<ColumnProperty>
                    {
                        new(nameof(CashierDailyBalanceItemModel.CashierEmail))
                        {
                            Width = "100",
                            Title = T("Nop.Plugin.Baramjk.PhotoPlatform.Admin.CashierEvents.CashierEmail").Text,
                            ClassName = NopColumnClassDefaults.CenterAll
                        },


                        new(nameof(CashierDailyBalanceItemModel.OpeningFundBalanceAmount))
                        {
                            Width = "100",
                            Title = T("Nop.Plugin.Baramjk.PhotoPlatform.Admin.CashierEvents.OpeningFundBalanceAmount").Text,
                            ClassName = NopColumnClassDefaults.CenterAll,
                            Editable = true,
                            EditType = EditType.Number
                        },

                        new(nameof(CashierDailyBalanceItemModel.Day))
                        {
                            Width = "50",
                            Title = T("Nop.Plugin.Baramjk.PhotoPlatform.Admin.CashierEvents.Day").Text,
                            ClassName = NopColumnClassDefaults.CenterAll,
                        },


                        new(nameof(CashierDailyBalanceItemModel.Id))
                        {
                            Title = T("Admin.Common.Edit").Text,
                            Width = "100",
                            ClassName = NopColumnClassDefaults.Button,
                            Render = new RenderButtonsInlineEdit()
                        },

                        new(nameof(CashierDailyBalanceItemModel.Id))
                        {
                            Title = T("Admin.Common.Delete").Text,
                            Width = "80",
                            ClassName = NopColumnClassDefaults.Button,
                            Render = new RenderButtonRemove(T("Admin.Common.Delete").Text)
                        }
                    }
                })

            </div>
        </div>
        <script>


            $(document).ready(function () {
                $('#btnRefreshFundBalances').click(function () {
                    updateTable("cashiers-daily-balances-grid");
                    return false;
                });
            });


        </script>
    </div>
</div>